---
import Layout from "@layouts/Layout.astro"; 
import { Image } from 'astro:assets';
import { supabase } from "@lib/supabase";
import Sectionhead from "@components/sectionhead.astro";
import Container from "@components/container.astro";
import Propertycard from "@components/propertycard.astro";
import '@fortawesome/fontawesome-free/css/all.min.css';

const { data, error} = await supabase
    .from('properties')
    .select()
---

<Layout title="search">
    <Container>
        <Sectionhead>
            <Fragment slot="title">Busca tu casa</Fragment>
            <Fragment slot="desc">Encuentra la casa de tus sue√±os</Fragment>
        </Sectionhead>
        <ul role="list" class="link-card-grid mt-4">
            {data?.map((property) => (
                <Propertycard 
                    image = {property.image}
                    price = {property.price}
                    name = {property.name}
                    location = {property.location}
                    district = {property.district}
                    area = {property.area}
                    dorms = {property.dorms}
                    bathrooms = {property.baths}
                />
            ))}
        </ul>
    <Container/>
</Layout>

